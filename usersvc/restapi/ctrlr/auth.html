<!-- auth.html -->
<html>
<head></head>
<body>
    <!-- href는 로그인 핸들러로부터 반환 받은 Google 로그인 링크가 담긴다 -->
    <a href="{{ . }}"  target="_blank" rel="opener">Google Login</a> 
</body>
</html>
<script language="Javascript" type="text/javascript">
function setCookie(name, value, options = {}) {
    options = {
        path: '/', // 경로 지정
        ...options // 아규먼트로 옵션을 넘겨줬을경우 전개연산자로 추가 갱신
    };

    if (options.expires instanceof Date) {
        options.expires = options.expires.toUTCString(); // 생 Date 객체라면 형식에 맞게 인코딩
    }

    let updatedCookie = encodeURIComponent(name) + "=" + encodeURIComponent(value);

    for (let optionKey in options) {
        updatedCookie += "; " + optionKey;
        let optionValue = options[optionKey];
        if (optionValue !== true) { // 밸류가 없다면
            updatedCookie += "=" + optionValue;
        }
    }

    document.cookie = updatedCookie; // 새로 갱신
}

//쿠키 생성
if (!document.cookie) {
 setCookie('expires', date.toUTCString());
 console.log('new Cookie created !');
}

// 쿠키 추가
window.SetAccessToken = function(grantType, accessToken, refreshToken) {
    setCookie("grant_type", grantType, { expires: new Date(Date.now() + 1000 * 60 * 60 * 24)});
    setCookie("access_token", accessToken, { expires: new Date(Date.now() + 1000 * 60 * 60 * 24)});
    setCookie("refresh_token", refreshToken, { expires: new Date(Date.now() + 1000 * 60 * 60 * 24) });

    if(document.referrer){
        window.location.href = document.referrer;
    } else {
        window.location.href = "/";
    }

}

</script>